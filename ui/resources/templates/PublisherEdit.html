<!doctype html>
<html lang=en xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${publisher == null ? 'New Publisher - PANDAS' : 'Edit Publisher - PANDAS'}">Edit Publisher - PANDAS</title>
    <link rel="stylesheet" href="../static/assets/Global.css" th:href="@{/assets/Global.css}">
    <script src="../static/assets/Global.js" th:src="@{/assets/Global.js}" defer></script>
</head>
<nav th:replace="_layout.html :: sidebar"></nav>
<main>
    <header>
        <nav>
            <button type="submit" data-keybind="s" class="btn btn-primary" form=editForm><i class="icon save"></i>Save</button>
            <button onclick="history.back(); return false" data-keybind="Escape" class="btn btn-secondary"><i class="icon cancel"></i> Cancel</button>
        </nav>
        <button th:if="${publisher != null}" type="submit" th:formaction="@{|/publishers/${publisher.id}/delete|}" class="btn btn-danger float-right" form="editForm"><i class="icon delete"></i>Delete</button>
    </header>

    <form method=post class=form th:object="${form}" id=editForm th:action="@{''}">
        <input type=hidden th:field="*{id}">
        <fieldset>
            <div>
                <label style="flex-grow: 1">Publisher Name <input th:field="*{name}" required></label>
                <label>Publisher Type
                    <select th:field="*{type}">
                        <option th:each="type : ${allPublisherTypes}"
                                th:value="${type.id}" th:text="${type.name}"></option>
                    </select>
                </label>
            </div>
            <label>Organisation Homepage <input th:field="*{url}"></label>
            <div>
                <label>Local Reference No. <input th:field="*{localReference}"></label>
                <label>ABN <input th:field="*{abn}" pattern="[0-9]{11}" title="11-digit Australian Business Number"
                                  onchange="this.value = this.value.replace(/[ -]/g, '')"></label>
            </div>
            <label>Notes <textarea th:field="*{notes}" rows="3"></textarea></label>
        </fieldset>

        <fieldset>
            <legend>Address</legend>
            <label><input th:field="*{addressLine1}"></label>
            <label><input th:field="*{addressLine2}"></label>
            <div>
                <label>Locality <input th:field="*{locality}"></label>
                <label>State <input th:field="*{state}"></label>
                <label>Postcode <input th:field="*{postcode}"></label>
                <label>Country <input th:field="*{country}"></label>
            </div>
        </fieldset>
    </form>
</main>