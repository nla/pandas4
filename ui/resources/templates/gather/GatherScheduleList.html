<!doctype html>
<html lang=en xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Gather Schedules - PANDAS</title>
    <link rel="stylesheet" href="../../static/assets/Global.css" th:href="@{/assets/Global.css}">
    <script src="../../static/assets/Global.js" th:src="@{/assets/Global.js}" defer></script>
</head>
<body>
<nav th:replace="~{_layout.html :: sidebar}"></nav>
<main>
    <header>
        <nav><a th:href="@{/schedules/new}" href="GatherScheduleEdit.html" class="btn btn-primary">New Schedule</a></nav>
    </header>
    <h2>Gather Schedules</h2>

    <p th:text="${danger}" th:if="${danger}" class="alert alert-danger"></p>

    <table>
        <tbody>
        <tr th:each="schedule: ${schedules}">
            <td><a href="GatherScheduleEdit.html" th:href="@{|/schedules/${schedule.id}|}" th:text="${schedule.name}">Daily</a></td>
            <td th:text="${schedule.summary()}"></td>
            <td style="text-align: right"><a th:href="@{/titles(schedule=${schedule.id})}" th:if="${titleCounts.containsKey(schedule.id)}"><span th:text="${#numbers.formatInteger(titleCounts.getOrDefault(schedule.id, 0), 0, 'COMMA')}">2</span> titles</a></td>
        </tr>
        </tbody>
    </table>
</main>